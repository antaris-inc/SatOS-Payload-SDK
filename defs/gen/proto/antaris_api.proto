////////////////////////////////////////////////////////////
//
//  

//  Copyright 2022 Antaris, Inc.

//  

//  Licensed under the Apache License, Version 2.0 (the 'License');

//  you may not use this file except in compliance with the License.

//  You may obtain a copy of the License at

//  

//  http://www.apache.org/licenses/LICENSE-2.0

//  

//  Unless required by applicable law or agreed to in writing, software

//  distributed under the License is distributed on an 'AS IS' BASIS,

//  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.

//  See the License for the specific language governing permissions and

//  limitations under the License.

//  

//  Copyright: Copyright 2022 Antaris, Inc.

//  This is an autogenerated file. Any changes made to this file would likely be over-written at build time.

//  Generated-From: antaris_api.xml

//
////////////////////////////////////////////////////////////



syntax = "proto3";


package antaris_api_peer_to_peer;

enum AntarisReturnCode {
    An_SUCCESS                       = 0; // Success
    An_GENERIC_FAILURE               = -1; // Generic failure
    An_NOT_IMPLEMENTED               = -2; // Feature/interface not implemented
    An_OUT_OF_RESOURCES              = -3; // Not enough resources
    An_NOT_PERMITTED                 = -4; // Operation not allowed
    An_INVALID_PARAMS                = -5; // Invalid parameter
    An_INCOMPATIBLE_VERSION          = -6; // Incompatible version of SDK invocation
}

enum FilePriorities {
    FILE_DL_PRIORITY_LOW             = 0; // low priority
    FILE_DL_PRIORITY_NORMAL          = 1; // normal priority
    FILE_DL_PRIORITY_HIGH            = 2; // high priority
    FILE_DL_PRIORITY_IMMEDIATE       = 3; // highest priority
}

enum ReqStatus {
    Request_success                  = 0; // Request Success
    Request_failed                   = 1; // Request failed
    Invalid_timer_or_duration_threshold = 2; // Invalid time or duration
    Invalid_temp_threshold           = 3; // Invalid temperature
    Invalid_hw_id                    = 4; // Invalid hardware Id
    Another_req_in_progress          = 5; // Another request already in progress
}

enum FileDlRadioType {
    FILE_DL_SBAND                    = 0; // S-band file downlink
    FILE_DL_XBAND                    = 1; // X-band file downlink
}

message AntarisSdkVersion {
    int32                           major            = 1; // major revision number
    int32                           minor            = 2; // minor revision number
    int32                           patch            = 3; // patch number
}

message ReqRegisterParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           health_check_fail_action = 2; // Action to be taken by PC on application health check failure
    AntarisSdkVersion               sdk_version      = 3; // SDK version against used by client
}

message RespRegisterParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           req_status       = 2; // status of registration request
    string                          auth_token       = 3; // auth-token to be used in case secure communication had been requested for while registering
}

message ReqGetCurrentLocationParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
}

message RespGetCurrentLocationParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           req_status       = 2; // status of get-location request
    double                          latitude         = 3; // current latitude
    double                          longitude        = 4; // current longitude
    double                          altitude         = 5; // current altitude
    float                           sd_latitude      = 6; // standard deviation in latitude
    float                           sd_longitude     = 7; // standard deviation in longitude
    float                           sd_altitude      = 8; // standard deviation in altitude
    int64                           determined_at    = 9; // time (seconds since epoch) when the location was determined
}

message ReqStageFileDownloadParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    string                          file_path        = 2; // File path relative to outbound mount-point
    FilePriorities                  file_priority    = 3; // File priority
    FileDlRadioType                 file_dl_band     = 4; // Radio Type for file downlink 
}

message RespStageFileDownloadParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           req_status       = 2; // status of stage file-download request
}

message ReqPayloadPowerControlParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           power_operation  = 2; // Power operation : Power-Off (0), Power-On (1)
    int32                           hw_id            = 3; // HW Id of Payload
}

message RespPayloadPowerControlParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           req_status       = 2; // status of payload-power-control request
}

message RespShutdownParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           req_status       = 2; // status of payload application shutdown request
}

message RespHealthCheckParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           application_state = 2; // Application State : Good (0), Error (non-Zero)
    int32                           reqs_to_pc_in_err_cnt = 3; // Number of requests to PC that faced error
    int32                           resps_to_pc_in_err_cnt = 4; // Number of responses to PC that faced error
}

message StartSequenceParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    string                          sequence_id      = 2; // app-defined sequence-id for payload application to execute
    string                          sequence_params  = 3; // app-defined sequence parameters corresponding to the sequence-id
    int64                           scheduled_deadline = 4; // Epoch time till this sequence is allowed to run
}

message ShutdownParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           grace_time       = 2; // grace time in seconds after which the VM will be powered down
    int32                           shutdown_reason  = 3; // purpose of shutdown
}

message HealthCheckParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           application_state = 2; // Application State : Good (0), Error (non-Zero)
    int32                           reqs_to_pc_in_err_cnt = 3; // Number of requests to PC that faced error
    int32                           resps_to_pc_in_err_cnt = 4; // Number of responses to PC that faced error
}

message PayloadMetricsInfo {
    int32                           counter          = 1; // Counter number
    string                          names            = 2; // Counter names, string
}

message FileInput {
    int32                           filename_length  = 1; // length of filename
    bytes                           filename         = 2; // filename string, bytes
}

message ReqPayloadMetricsParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
}

message PayloadMetricsResponse {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int64                           timestamp        = 2; // Capture time stamp
    int32                           used_counter     = 3; // Counters used out of maximum 32 counters
    repeated PayloadMetricsInfo     metrics          = 4; // Counter values, maximum 32 counters
}

message CmdSequenceDoneParams {
    string                          sequence_id      = 1; // sequence id that has completed execution. MUST agree with StartSequenceParams.sequence-id.
}

message PaSatOsMsg {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           command_id       = 2; // command id
    bytes                           payload_data     = 3; // payload data for sending for SatOS, bytes
}

message RespPaSatOsMsg {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           command_id       = 2; // command id
    int32                           req_status       = 3; // status of PA SatOS Message request
}

message SatOsPaMsg {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           command_id       = 2; // command id
    bytes                           payload_data     = 3; // payload data for sending for PA, bytes
}

message RespSatOsPaMsg {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           app_id           = 2; // App id for nowing the source of responses
    int32                           command_id       = 3; // command id
    int32                           req_status       = 4; // status of SatOS PA Message request
}

message HostToPeerFcmOperation {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           peer_app_id      = 2; // PC appliction id from which files are copied to edge system
    int32                           fcm_src          = 3; // source of fcm command
    int32                           fcm_dest         = 4; // destination of fcm command
    int32                           no_of_files      = 5; // no of files to copy, if the value is 0 copy all files
    repeated FileInput              file_input       = 6; // details of Files to be copied
}

message HostToPeerFcmOperationNotify {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           fcm_complete     = 2; // 0 indiacates if all file transfer complete, -1 if files transfer in still ongoing 
    int32                           req_status       = 3; // status of file transfer
    string                          file_name        = 4; // file_name, string
}

message ReqGnssEphStopDataReq {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
}

message RespGnssEphStopDataReq {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           req_status       = 2; // status of GNSS EPH data stop request
}

message ReqGnssEphStartDataReq {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           periodicity_in_ms = 2; // Time between consecutive notifications in ms
    int32                           eph2_enable      = 3; // 0 = disable eph2, 1 = enable eph2
}

message RespGnssEphStartDataReq {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           req_status       = 2; // status of GNSS EPH data start request
}

message OBC_time {
    int32                           hour             = 1; // hour
    int32                           minute           = 2; // Minute
    int32                           millisecond      = 3; // millisecond
    int32                           date             = 4; // date
    int32                           month            = 5; // month
    int32                           year             = 6; // year
}

message GpsEphemerisData {
    int64                           gps_fix_time     = 1; // GPS time
    int64                           gps_sys_time     = 2; // GPS System time
    repeated int64                  gps_position_ecef = 3; // GPS position
    repeated int64                  gps_velocity_ecef = 4; // GPS velocity
    int32                           gps_validity_flag_pos_vel = 5; // GPS validity flag
}

message AdcsEphemerisData {
    double                          orbit_time       = 1; // ADCS Orbit Propagator/System Time
    double                          eci_position_x   = 2; // ECI Position X (km)
    double                          eci_position_y   = 3; // ECI Position Y (km)
    double                          eci_position_z   = 4; // ECI Position Z (km)
    double                          eci_velocity_x   = 5; // ECI Velocity X (km/s)
    double                          eci_velocity_y   = 6; // ECI Velocity Y (km/s)
    double                          eci_velocity_z   = 7; // ECI Velocity Z (km/s)
    double                          ecef_position_x  = 8; // ECEF Position X (km)
    double                          ecef_position_y  = 9; // ECEF Position Y (km)
    double                          ecef_position_z  = 10; // ECEF Position Z (km)
    double                          ecef_velocity_x  = 11; // ECEF Velocity X (km/s)
    double                          ecef_velocity_y  = 12; // ECEF Velocity Y (km/s)
    double                          ecef_velocity_z  = 13; // ECEF Velocity Z (km/s)
    double                          ang_rate_x       = 14; // X axis Angular rate (deg/s)
    double                          ang_rate_y       = 15; // Y axis Angular rate (deg/s)
    double                          ang_rate_z       = 16; // Z axis Angular rate (deg/s)
    double                          att_quat_1       = 17; // Attitude Quaternion 1
    double                          att_quat_2       = 20; // Attitude Quaternion 2
    double                          att_quat_3       = 21; // Attitude Quaternion 3
    double                          att_quat_4       = 22; // Attitude Quaternion 4
    float                           latitude         = 23; // Latitude (deg)
    float                           longitude        = 24; // Longitude (deg)
    float                           altitude         = 25; // Altitude (km)
    float                           nadir_vector_x   = 26; // X Nadir Vector
    float                           nadir_vector_y   = 27; // Y Nadir Vector
    float                           nadir_vector_z   = 28; // Z Nadir Vector
    float                           gd_nadir_vector_x = 29; // X Geodetic Nadir Vector
    float                           gd_nadir_vector_y = 30; // Y Geodetic Nadir Vector
    float                           gd_nadir_vector_z = 31; // Z Geodetic Nadir Vector
    float                           beta_angle       = 32; // Beta Angle (deg)
    int32                           validity_flags   = 33; // 1-bit flags = Time Validity,Position and Velocity ECI Validity, Position and Velocity ECEF Validity, Rate Validity, Attitude Validity,Lat-Lon-Altitude Validity,Nadir Vector Validity,GD Nadir Vector Validity,Beta Angle Validity
}

message GnssEphData {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    AdcsEphemerisData               adcs_eph_data    = 2; // ADCS data
    GpsEphemerisData                gps_eph_data     = 3; // GPS data
    OBC_time                        obc_time         = 4; // Obc time
    int32                           adcs_timeout_flag = 5; // ADCS flag
    int32                           gps_timeout_flag = 6; // GPS flag
}

message ReqGetEpsVoltageStopReq {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
}

message RespGetEpsVoltageStopReq {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           req_status       = 2; // status of get-eps-voltage-stop request
}

message ReqGetEpsVoltageStartReq {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           periodicity_in_ms = 2; // Time between consecutive notifications in ms
}

message RespGetEpsVoltageStartReq {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           req_status       = 2; // status of get-eps-voltage-start request
}

message GetEpsVoltage {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    float                           eps_voltage      = 2; // EPS voltage
}

message NtfRemoteAcPwrStatus {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           ac_app_id        = 2; // Remote AC app_id
    int32                           power_status     = 3; // 0: ON, 1 = OFF
}

message StartSesThermMgmntReq {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           hardware_id      = 2; // 0:SESA, 1:SESB
    int32                           duration         = 3; // duration in ms
    int32                           lower_threshold  = 4; // lower temp threshold
    int32                           upper_threshold  = 5; // upper temp threshold
}

message RespStartSesThermMgmntReq {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           req_status       = 2; // 0: success, 1: fail
}

message StopSesThermMgmntReq {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           hardware_id      = 2; // 0:SESA, 1:SESB
}

message RespStopSesThermMgmntReq {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           req_status       = 2; // 0: success, 1: fail
}

message SesTempReq {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           hardware_id      = 2; // 0:SESA, 1:SESB
}

message RespSesTempReqParams {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           status           = 2; // Status of read
    int32                           temperature      = 3; // in Celsius
    int32                           hardware_id      = 4; // SESA or SESB hardware
    int32                           heater_pwr_status = 5; // 0:OFF, 1:ON
}

message SesThermalStatusNtf {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
    int32                           heater_pwr_status = 2; // 0:OFF, 1:ON
    int32                           hardware_id      = 3; // SESA or SESB hardware
    int32                           reserved         = 4; // reserved for future use
    int32                           heater_temp_status = 5; // Temperature status
    int32                           temperature      = 6; // in Celsius
}

message AntarisCorrelationId {
    int32                           correlation_id   = 1; // correlation id for matching requests with responses and callbacks
}

message AntarisReturnType {
    AntarisReturnCode               return_code      = 1; // return code
}

service AntarisapiApplicationCallback {
    rpc PA_StartSequence(StartSequenceParams) returns (AntarisReturnType) {}
    rpc PA_ShutdownApp(ShutdownParams) returns (AntarisReturnType) {}
    rpc PA_ProcessHealthCheck(HealthCheckParams) returns (AntarisReturnType) {}
    rpc PA_ProcessResponseRegister(RespRegisterParams) returns (AntarisReturnType) {}
    rpc PA_ProcessResponseGetCurrentLocation(RespGetCurrentLocationParams) returns (AntarisReturnType) {}
    rpc PA_ProcessResponseStageFileDownload(RespStageFileDownloadParams) returns (AntarisReturnType) {}
    rpc PA_ProcessResponsePayloadPowerControl(RespPayloadPowerControlParams) returns (AntarisReturnType) {}
    rpc PA_ProcessReqPayloadMetrics(ReqPayloadMetricsParams) returns (AntarisReturnType) {}
    rpc PA_ProcessRespGnssEphStopDataReq(RespGnssEphStopDataReq) returns (AntarisReturnType) {}
    rpc PA_ProcessRespGnssEphStartDataReq(RespGnssEphStartDataReq) returns (AntarisReturnType) {}
    rpc PA_ProcessGnssEphData(GnssEphData) returns (AntarisReturnType) {}
    rpc PA_ProcessRespGetEpsVoltageStopReq(RespGetEpsVoltageStopReq) returns (AntarisReturnType) {}
    rpc PA_ProcessRespGetEpsVoltageStartReq(RespGetEpsVoltageStartReq) returns (AntarisReturnType) {}
    rpc PA_ProcessGetEpsVoltage(GetEpsVoltage) returns (AntarisReturnType) {}
    rpc PA_ProcessRespStartSesThermMgmntReq(RespStartSesThermMgmntReq) returns (AntarisReturnType) {}
    rpc PA_ProcessRespStopSesThermMgmntReq(RespStopSesThermMgmntReq) returns (AntarisReturnType) {}
    rpc PA_ProcessRespSesTempReq(RespSesTempReqParams) returns (AntarisReturnType) {}
    rpc PA_ProcessSesThrmlNtf(SesThermalStatusNtf) returns (AntarisReturnType) {}
    rpc PA_ProcessRespPaSatOsMsg(RespPaSatOsMsg) returns (AntarisReturnType) {}
    rpc PA_ProcessSatOsPaMsg(SatOsPaMsg) returns (AntarisReturnType) {}
    rpc PA_ProcessRemoteAcPwrStatusNtf(NtfRemoteAcPwrStatus) returns (AntarisReturnType) {}
    rpc PA_ProcessHostToPeerFcmOperationNotify(HostToPeerFcmOperationNotify) returns (AntarisReturnType) {}
}

service AntarisapiPayloadController {
    rpc PC_register(ReqRegisterParams) returns (AntarisReturnType) {}
    rpc PC_get_current_location(ReqGetCurrentLocationParams) returns (AntarisReturnType) {}
    rpc PC_stage_file_download(ReqStageFileDownloadParams) returns (AntarisReturnType) {}
    rpc PC_sequence_done(CmdSequenceDoneParams) returns (AntarisReturnType) {}
    rpc PC_payload_power_control(ReqPayloadPowerControlParams) returns (AntarisReturnType) {}
    rpc PC_response_health_check(RespHealthCheckParams) returns (AntarisReturnType) {}
    rpc PC_response_shutdown(RespShutdownParams) returns (AntarisReturnType) {}
    rpc PC_response_payload_metrics(PayloadMetricsResponse) returns (AntarisReturnType) {}
    rpc PC_gnss_eph_stop_req(ReqGnssEphStopDataReq) returns (AntarisReturnType) {}
    rpc PC_gnss_eph_start_req(ReqGnssEphStartDataReq) returns (AntarisReturnType) {}
    rpc PC_get_eps_voltage_stop_req(ReqGetEpsVoltageStopReq) returns (AntarisReturnType) {}
    rpc PC_get_eps_voltage_start_req(ReqGetEpsVoltageStartReq) returns (AntarisReturnType) {}
    rpc PC_start_ses_therm_mgmnt_req(StartSesThermMgmntReq) returns (AntarisReturnType) {}
    rpc PC_stop_ses_therm_mgmnt_req(StopSesThermMgmntReq) returns (AntarisReturnType) {}
    rpc PC_ses_temp_req(SesTempReq) returns (AntarisReturnType) {}
    rpc PC_pa_satos_message(PaSatOsMsg) returns (AntarisReturnType) {}
    rpc PC_host_to_peer_fcm_operation(HostToPeerFcmOperation) returns (AntarisReturnType) {}
    rpc PC_satos_pa_message(RespSatOsPaMsg) returns (AntarisReturnType) {}
}

